"
" .vimperatorrc
"
" vimperator v3.5
"

" runtimepath
set runtimepath=~/.vimperator

" オプション設定 {{{1
"
" disable beep
set visualbell
highlight Bell display:none

" タイトルの変更
set titlestring=Firefox
" スクロールバー表示
set scrollbars=true
" ツールバー表示
set toolbars=none,tabs
" タブ番号を非表示
set notabnumbers

" ページロード時にテキストボックスにフォーカスするのを防ぐ
set focuscontent

" ヒントの見出し(label)に利用する文字の指定
set hintchars=hjkluioynm

" 検索語のハイライト
set hlsearch

" :[tab]open時の補完設定
"   s 検索エンジン+キーワードURL
"   S サジェストエンジン
"   l ロケーションバーの補完機能を利用
"   b ブックマーク
set complete=sSlb

" サーチエンジンの設定
set defsearch=google

" サジェストエンジンの設定
set suggestengines=google

" コマンド入力時にコマンド名を自動補完
set wildmode="list:full"

" コマンド履歴の保存数 (default: 500)
set history=500

" 表示されるメッセージの種類を設定 (最大値=15)
set verbose=15

" ']]'や'[['で探す候補に日本人として日本語を追加。
" set nextpattern=^次(へ|の|ペ),^続き,\bnext\b,^>$,^(>>|&#187;)$,^(>|&#187;),(>|&#187;)$,\bmore\b
" set previouspattern=^前(へ|の|ペ),^戻る,\bprev|previous\b,^<$,^(<<|&#171;)$,^(<|&#171;),(<|&#171;)$
set nextpattern=^次(へ|の|ペ),^続き,\bnext,^>$,^(>>|»)$,^(>|»),(>|»)$,\bmore\b
set previouspattern=^前(へ|の|ペ),^戻る\bprev|previous\b,^<$,^(<<|«)$,^(<|«),(<|«)$


" コマンドラインモード時に自動でimeをOFFにする
style -name commandline-ime chrome://* #liberator-commandline-command input {ime-mode: inactive;}


" カラー設定 {{{1
"
" colorscheme mytheme
colorscheme jellybeans


" プラグイン毎の設定 {{{1
"
" imekeys.js
" コマンドラインで自動的にオフ
let g:imeoff='cmd'

" toggler.js
js <<EOM
liberator.globalVariables.toggler = {
  toolbars: ["set toolbars=none,tabs", "set toolbars=all"],
  //...
};
EOM


" ユーザー定義コマンド {{{1
"
command! reloadrc :source ~/.vimperatorrc

" プライベートタブ切り替え
js <<EOM
function toggle_private_tab()
{
  flg = privateTab.isTabPrivate(gBrowser.mCurrentTab);
  privateTab.toggleTabPrivate(gBrowser.mCurrentTab, !flg);
}
EOM
command! toggleprivate javascript toggle_private_tab()

" Evernote Web Clipperを起動
" command! clip javascript evernote_doAction()


" キーマッピング {{{1
"
mapclear

" LEADERの変更 「\」は遠いので「,」にする
let mapleader=","

" 移動
nnoremap j <Down>
nnoremap k <Up>
nnoremap <C-e> <C-d>
nnoremap <C-y> <C-u>
nnoremap <C-f> <PageDown>
nnoremap <C-b> <PageUp>

" 左右移動
nnoremap <S-j> <Right>
nnoremap <S-k> <Left>

" 戻ると進む
nnoremap b     <A-Left>
nnoremap <S-b> <A-Right>

" タブ移動
nnoremap h gT
nnoremap l gt

" タブ位置変更
nnoremap <S-h> :tabmove -1<CR> 
nnoremap <S-l> :tabmove +1<CR> 

" 最初の入力フィールドへ移動
nnoremap i gi

" Ctrl+cでも選択文字列のコピーが出来るようにする
nnoremap <C-c> Y

" 検索結果のハイライトをEsc連打でリセットする
nnoremap <silent> <Esc><Esc> :nohlsearch<CR>

" All in one sidebarのトグル
nnoremap s <F4>

" ツールバーのトグル
nnoremap x :toggle toolbars<CR>

" コマンドラインでのカーソル移動
cnoremap <C-n> <TAB>
cnoremap <C-p> <S-TAB>
 
" 右手だけで操作するための設定
nnoremap <LEADER>j f
nnoremap <LEADER>m <S-f>
nnoremap <LEADER>k d
nnoremap <LEADER>h <A-Left>
nnoremap <LEADER>l <A-Right>

" プライベートブラウジング
nnoremap <LEADER>p :toggleprivate<CR>
nnoremap <LEADER>P :winopen -private<CR>

" vimperatorrc再読み込み
nnoremap <LEADER>r :reloadrc<CR>

" emacsキーバインド (インサートモード)
inoremap <C-p> <Up>
inoremap <C-n> <Down>
inoremap <C-b> <Left>
inoremap <C-f> <Right>
inoremap <C-e> <End>
inoremap <C-a> <Home>
inoremap <C-h> <BS>
inoremap <C-d> <Del>

" emacsキーバインド (コマンドモード)
cnoremap <C-b> <Left>
cnoremap <C-f> <Right>
cnoremap <C-e> <End>
cnoremap <C-a> <Home>
cnoremap <C-h> <BS>
cnoremap <C-d> <Del>

" disable keys
nnoremap <C-w> <Nop>
nnoremap <S-Esc> <Nop>
cnoremap <S-Esc> <Nop>
inoremap <S-Esc> <Nop>

" 読み込み完了のメッセージ表示
echo 'vimperatorrc loaded'


" {{{1
" vim:set expandtab ft=vim ts=2 sts=2 sw=2 foldmethod=marker:
